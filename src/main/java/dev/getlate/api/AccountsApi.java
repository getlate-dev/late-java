/*
 * Late API
 * API reference for Late. Authenticate with a Bearer API key. Base URL: https://getlate.dev/api 
 *
 * The version of the OpenAPI document: 1.0.1
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package dev.getlate.api;

import dev.getlate.ApiClient;
import dev.getlate.ApiException;
import dev.getlate.ApiResponse;
import dev.getlate.Configuration;
import dev.getlate.Pair;

import dev.getlate.model.DeleteAccountGroup200Response;
import dev.getlate.model.GetAccountHealth200Response;
import dev.getlate.model.GetAllAccountsHealth200Response;
import dev.getlate.model.GetFollowerStats200Response;
import dev.getlate.model.GetFollowerStats403Response;
import dev.getlate.model.InlineObject;
import dev.getlate.model.InlineObject1;
import dev.getlate.model.ListAccounts200Response;
import java.time.LocalDate;
import dev.getlate.model.UpdateAccount200Response;
import dev.getlate.model.UpdateAccountRequest;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;

import java.io.InputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.net.http.HttpRequest;
import java.nio.channels.Channels;
import java.nio.channels.Pipe;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.time.Duration;

import java.util.ArrayList;
import java.util.StringJoiner;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.function.Consumer;

@javax.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", date = "2026-02-11T11:44:41.537184893Z[Etc/UTC]", comments = "Generator version: 7.19.0")
public class AccountsApi {
  /**
   * Utility class for extending HttpRequest.Builder functionality.
   */
  private static class HttpRequestBuilderExtensions {
    /**
     * Adds additional headers to the provided HttpRequest.Builder. Useful for adding method/endpoint specific headers.
     *
     * @param builder the HttpRequest.Builder to which headers will be added
     * @param headers a map of header names and values to add; may be null
     * @return the same HttpRequest.Builder instance with the additional headers set
     */
    static HttpRequest.Builder withAdditionalHeaders(HttpRequest.Builder builder, Map<String, String> headers) {
        if (headers != null) {
            for (Map.Entry<String, String> entry : headers.entrySet()) {
                builder.header(entry.getKey(), entry.getValue());
            }
        }
        return builder;
    }
  }
  private final HttpClient memberVarHttpClient;
  private final ObjectMapper memberVarObjectMapper;
  private final String memberVarBaseUri;
  private final Consumer<HttpRequest.Builder> memberVarInterceptor;
  private final Duration memberVarReadTimeout;
  private final Consumer<HttpResponse<InputStream>> memberVarResponseInterceptor;
  private final Consumer<HttpResponse<InputStream>> memberVarAsyncResponseInterceptor;

  public AccountsApi() {
    this(Configuration.getDefaultApiClient());
  }

  public AccountsApi(ApiClient apiClient) {
    memberVarHttpClient = apiClient.getHttpClient();
    memberVarObjectMapper = apiClient.getObjectMapper();
    memberVarBaseUri = apiClient.getBaseUri();
    memberVarInterceptor = apiClient.getRequestInterceptor();
    memberVarReadTimeout = apiClient.getReadTimeout();
    memberVarResponseInterceptor = apiClient.getResponseInterceptor();
    memberVarAsyncResponseInterceptor = apiClient.getAsyncResponseInterceptor();
  }


  protected ApiException getApiException(String operationId, HttpResponse<InputStream> response) throws IOException {
    InputStream responseBody = ApiClient.getResponseBody(response);
    String body = null;
    try {
      body = responseBody == null ? null : new String(responseBody.readAllBytes());
    } finally {
      if (responseBody != null) {
        responseBody.close();
      }
    }
    String message = formatExceptionMessage(operationId, response.statusCode(), body);
    return new ApiException(response.statusCode(), message, response.headers(), body);
  }

  private String formatExceptionMessage(String operationId, int statusCode, String body) {
    if (body == null || body.isEmpty()) {
      body = "[no body]";
    }
    return operationId + " call failed with: " + statusCode + " - " + body;
  }

  /**
   * Download file from the given response.
   *
   * @param response Response
   * @return File
   * @throws ApiException If fail to read file content from response and write to disk
   */
  public File downloadFileFromResponse(HttpResponse<InputStream> response, InputStream responseBody) throws ApiException {
    if (responseBody == null) {
      throw new ApiException(new IOException("Response body is empty"));
    }
    try {
      File file = prepareDownloadFile(response);
      java.nio.file.Files.copy(responseBody, file.toPath(), java.nio.file.StandardCopyOption.REPLACE_EXISTING);
      return file;
    } catch (IOException e) {
      throw new ApiException(e);
    }
  }

  /**
   * <p>Prepare the file for download from the response.</p>
   *
   * @param response a {@link java.net.http.HttpResponse} object.
   * @return a {@link java.io.File} object.
   * @throws java.io.IOException if any.
   */
  private File prepareDownloadFile(HttpResponse<InputStream> response) throws IOException {
    String filename = null;
    java.util.Optional<String> contentDisposition = response.headers().firstValue("Content-Disposition");
    if (contentDisposition.isPresent() && !"".equals(contentDisposition.get())) {
      // Get filename from the Content-Disposition header.
      java.util.regex.Pattern pattern = java.util.regex.Pattern.compile("filename=['\"]?([^'\"\\s]+)['\"]?");
      java.util.regex.Matcher matcher = pattern.matcher(contentDisposition.get());
      if (matcher.find())
        filename = matcher.group(1);
    }
    File file = null;
    if (filename != null) {
      java.nio.file.Path tempDir = java.nio.file.Files.createTempDirectory("swagger-gen-native");
      java.nio.file.Path filePath = java.nio.file.Files.createFile(tempDir.resolve(filename));
      file = filePath.toFile();
      tempDir.toFile().deleteOnExit();   // best effort cleanup
      file.deleteOnExit(); // best effort cleanup
    } else {
      file = java.nio.file.Files.createTempFile("download-", "").toFile();
      file.deleteOnExit(); // best effort cleanup
    }
    return file;
  }

  /**
   * Disconnect a social account
   * 
   * @param accountId  (required)
   * @return DeleteAccountGroup200Response
   * @throws ApiException if fails to make API call
   */
  public DeleteAccountGroup200Response deleteAccount(@javax.annotation.Nonnull String accountId) throws ApiException {
    return deleteAccount(accountId, null);
  }

  /**
   * Disconnect a social account
   * 
   * @param accountId  (required)
   * @param headers Optional headers to include in the request
   * @return DeleteAccountGroup200Response
   * @throws ApiException if fails to make API call
   */
  public DeleteAccountGroup200Response deleteAccount(@javax.annotation.Nonnull String accountId, Map<String, String> headers) throws ApiException {
    ApiResponse<DeleteAccountGroup200Response> localVarResponse = deleteAccountWithHttpInfo(accountId, headers);
    return localVarResponse.getData();
  }

  /**
   * Disconnect a social account
   * 
   * @param accountId  (required)
   * @return ApiResponse&lt;DeleteAccountGroup200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<DeleteAccountGroup200Response> deleteAccountWithHttpInfo(@javax.annotation.Nonnull String accountId) throws ApiException {
    return deleteAccountWithHttpInfo(accountId, null);
  }

  /**
   * Disconnect a social account
   * 
   * @param accountId  (required)
   * @param headers Optional headers to include in the request
   * @return ApiResponse&lt;DeleteAccountGroup200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<DeleteAccountGroup200Response> deleteAccountWithHttpInfo(@javax.annotation.Nonnull String accountId, Map<String, String> headers) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = deleteAccountRequestBuilder(accountId, headers);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      InputStream localVarResponseBody = null;
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("deleteAccount", localVarResponse);
        }
        localVarResponseBody = ApiClient.getResponseBody(localVarResponse);
        if (localVarResponseBody == null) {
          return new ApiResponse<DeleteAccountGroup200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        
        
        String responseBody = new String(localVarResponseBody.readAllBytes());
        DeleteAccountGroup200Response responseValue = responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<DeleteAccountGroup200Response>() {});
        

        return new ApiResponse<DeleteAccountGroup200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseValue
        );
      } finally {
        if (localVarResponseBody != null) {
          localVarResponseBody.close();
        }
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder deleteAccountRequestBuilder(@javax.annotation.Nonnull String accountId, Map<String, String> headers) throws ApiException {
    // verify the required parameter 'accountId' is set
    if (accountId == null) {
      throw new ApiException(400, "Missing the required parameter 'accountId' when calling deleteAccount");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v1/accounts/{accountId}"
        .replace("{accountId}", ApiClient.urlEncode(accountId.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("DELETE", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    // Add custom headers if provided
    localVarRequestBuilder = HttpRequestBuilderExtensions.withAdditionalHeaders(localVarRequestBuilder, headers);
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Check health of a specific account
   * Returns detailed health information for a specific social account, including token status, granted permissions, missing permissions, and actionable recommendations. 
   * @param accountId The account ID to check (required)
   * @return GetAccountHealth200Response
   * @throws ApiException if fails to make API call
   */
  public GetAccountHealth200Response getAccountHealth(@javax.annotation.Nonnull String accountId) throws ApiException {
    return getAccountHealth(accountId, null);
  }

  /**
   * Check health of a specific account
   * Returns detailed health information for a specific social account, including token status, granted permissions, missing permissions, and actionable recommendations. 
   * @param accountId The account ID to check (required)
   * @param headers Optional headers to include in the request
   * @return GetAccountHealth200Response
   * @throws ApiException if fails to make API call
   */
  public GetAccountHealth200Response getAccountHealth(@javax.annotation.Nonnull String accountId, Map<String, String> headers) throws ApiException {
    ApiResponse<GetAccountHealth200Response> localVarResponse = getAccountHealthWithHttpInfo(accountId, headers);
    return localVarResponse.getData();
  }

  /**
   * Check health of a specific account
   * Returns detailed health information for a specific social account, including token status, granted permissions, missing permissions, and actionable recommendations. 
   * @param accountId The account ID to check (required)
   * @return ApiResponse&lt;GetAccountHealth200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<GetAccountHealth200Response> getAccountHealthWithHttpInfo(@javax.annotation.Nonnull String accountId) throws ApiException {
    return getAccountHealthWithHttpInfo(accountId, null);
  }

  /**
   * Check health of a specific account
   * Returns detailed health information for a specific social account, including token status, granted permissions, missing permissions, and actionable recommendations. 
   * @param accountId The account ID to check (required)
   * @param headers Optional headers to include in the request
   * @return ApiResponse&lt;GetAccountHealth200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<GetAccountHealth200Response> getAccountHealthWithHttpInfo(@javax.annotation.Nonnull String accountId, Map<String, String> headers) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = getAccountHealthRequestBuilder(accountId, headers);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      InputStream localVarResponseBody = null;
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("getAccountHealth", localVarResponse);
        }
        localVarResponseBody = ApiClient.getResponseBody(localVarResponse);
        if (localVarResponseBody == null) {
          return new ApiResponse<GetAccountHealth200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        
        
        String responseBody = new String(localVarResponseBody.readAllBytes());
        GetAccountHealth200Response responseValue = responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<GetAccountHealth200Response>() {});
        

        return new ApiResponse<GetAccountHealth200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseValue
        );
      } finally {
        if (localVarResponseBody != null) {
          localVarResponseBody.close();
        }
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder getAccountHealthRequestBuilder(@javax.annotation.Nonnull String accountId, Map<String, String> headers) throws ApiException {
    // verify the required parameter 'accountId' is set
    if (accountId == null) {
      throw new ApiException(400, "Missing the required parameter 'accountId' when calling getAccountHealth");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v1/accounts/{accountId}/health"
        .replace("{accountId}", ApiClient.urlEncode(accountId.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    // Add custom headers if provided
    localVarRequestBuilder = HttpRequestBuilderExtensions.withAdditionalHeaders(localVarRequestBuilder, headers);
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Check health of all connected accounts
   * Returns the health status of all connected social accounts, including token validity, permissions status, and any issues that need attention. Useful for monitoring account connections and identifying accounts that need reconnection. 
   * @param profileId Filter by profile ID (optional)
   * @param platform Filter by platform (optional)
   * @param status Filter by health status (optional)
   * @return GetAllAccountsHealth200Response
   * @throws ApiException if fails to make API call
   */
  public GetAllAccountsHealth200Response getAllAccountsHealth(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable String platform, @javax.annotation.Nullable String status) throws ApiException {
    return getAllAccountsHealth(profileId, platform, status, null);
  }

  /**
   * Check health of all connected accounts
   * Returns the health status of all connected social accounts, including token validity, permissions status, and any issues that need attention. Useful for monitoring account connections and identifying accounts that need reconnection. 
   * @param profileId Filter by profile ID (optional)
   * @param platform Filter by platform (optional)
   * @param status Filter by health status (optional)
   * @param headers Optional headers to include in the request
   * @return GetAllAccountsHealth200Response
   * @throws ApiException if fails to make API call
   */
  public GetAllAccountsHealth200Response getAllAccountsHealth(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable String platform, @javax.annotation.Nullable String status, Map<String, String> headers) throws ApiException {
    ApiResponse<GetAllAccountsHealth200Response> localVarResponse = getAllAccountsHealthWithHttpInfo(profileId, platform, status, headers);
    return localVarResponse.getData();
  }

  /**
   * Check health of all connected accounts
   * Returns the health status of all connected social accounts, including token validity, permissions status, and any issues that need attention. Useful for monitoring account connections and identifying accounts that need reconnection. 
   * @param profileId Filter by profile ID (optional)
   * @param platform Filter by platform (optional)
   * @param status Filter by health status (optional)
   * @return ApiResponse&lt;GetAllAccountsHealth200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<GetAllAccountsHealth200Response> getAllAccountsHealthWithHttpInfo(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable String platform, @javax.annotation.Nullable String status) throws ApiException {
    return getAllAccountsHealthWithHttpInfo(profileId, platform, status, null);
  }

  /**
   * Check health of all connected accounts
   * Returns the health status of all connected social accounts, including token validity, permissions status, and any issues that need attention. Useful for monitoring account connections and identifying accounts that need reconnection. 
   * @param profileId Filter by profile ID (optional)
   * @param platform Filter by platform (optional)
   * @param status Filter by health status (optional)
   * @param headers Optional headers to include in the request
   * @return ApiResponse&lt;GetAllAccountsHealth200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<GetAllAccountsHealth200Response> getAllAccountsHealthWithHttpInfo(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable String platform, @javax.annotation.Nullable String status, Map<String, String> headers) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = getAllAccountsHealthRequestBuilder(profileId, platform, status, headers);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      InputStream localVarResponseBody = null;
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("getAllAccountsHealth", localVarResponse);
        }
        localVarResponseBody = ApiClient.getResponseBody(localVarResponse);
        if (localVarResponseBody == null) {
          return new ApiResponse<GetAllAccountsHealth200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        
        
        String responseBody = new String(localVarResponseBody.readAllBytes());
        GetAllAccountsHealth200Response responseValue = responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<GetAllAccountsHealth200Response>() {});
        

        return new ApiResponse<GetAllAccountsHealth200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseValue
        );
      } finally {
        if (localVarResponseBody != null) {
          localVarResponseBody.close();
        }
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder getAllAccountsHealthRequestBuilder(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable String platform, @javax.annotation.Nullable String status, Map<String, String> headers) throws ApiException {

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v1/accounts/health";

    List<Pair> localVarQueryParams = new ArrayList<>();
    StringJoiner localVarQueryStringJoiner = new StringJoiner("&");
    String localVarQueryParameterBaseName;
    localVarQueryParameterBaseName = "profileId";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("profileId", profileId));
    localVarQueryParameterBaseName = "platform";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("platform", platform));
    localVarQueryParameterBaseName = "status";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("status", status));

    if (!localVarQueryParams.isEmpty() || localVarQueryStringJoiner.length() != 0) {
      StringJoiner queryJoiner = new StringJoiner("&");
      localVarQueryParams.forEach(p -> queryJoiner.add(p.getName() + '=' + p.getValue()));
      if (localVarQueryStringJoiner.length() != 0) {
        queryJoiner.add(localVarQueryStringJoiner.toString());
      }
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath + '?' + queryJoiner.toString()));
    } else {
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));
    }

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    // Add custom headers if provided
    localVarRequestBuilder = HttpRequestBuilderExtensions.withAdditionalHeaders(localVarRequestBuilder, headers);
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Get follower stats and growth metrics
   * Returns follower count history and growth metrics for connected social accounts. **Requires analytics add-on subscription.**  **Data Freshness:** Follower counts are automatically refreshed once per day. 
   * @param accountIds Comma-separated list of account IDs (optional, defaults to all user&#39;s accounts) (optional)
   * @param profileId Filter by profile ID (optional)
   * @param fromDate Start date in YYYY-MM-DD format (defaults to 30 days ago) (optional)
   * @param toDate End date in YYYY-MM-DD format (defaults to today) (optional)
   * @param granularity Data aggregation level (optional, default to daily)
   * @return GetFollowerStats200Response
   * @throws ApiException if fails to make API call
   */
  public GetFollowerStats200Response getFollowerStats(@javax.annotation.Nullable String accountIds, @javax.annotation.Nullable String profileId, @javax.annotation.Nullable LocalDate fromDate, @javax.annotation.Nullable LocalDate toDate, @javax.annotation.Nullable String granularity) throws ApiException {
    return getFollowerStats(accountIds, profileId, fromDate, toDate, granularity, null);
  }

  /**
   * Get follower stats and growth metrics
   * Returns follower count history and growth metrics for connected social accounts. **Requires analytics add-on subscription.**  **Data Freshness:** Follower counts are automatically refreshed once per day. 
   * @param accountIds Comma-separated list of account IDs (optional, defaults to all user&#39;s accounts) (optional)
   * @param profileId Filter by profile ID (optional)
   * @param fromDate Start date in YYYY-MM-DD format (defaults to 30 days ago) (optional)
   * @param toDate End date in YYYY-MM-DD format (defaults to today) (optional)
   * @param granularity Data aggregation level (optional, default to daily)
   * @param headers Optional headers to include in the request
   * @return GetFollowerStats200Response
   * @throws ApiException if fails to make API call
   */
  public GetFollowerStats200Response getFollowerStats(@javax.annotation.Nullable String accountIds, @javax.annotation.Nullable String profileId, @javax.annotation.Nullable LocalDate fromDate, @javax.annotation.Nullable LocalDate toDate, @javax.annotation.Nullable String granularity, Map<String, String> headers) throws ApiException {
    ApiResponse<GetFollowerStats200Response> localVarResponse = getFollowerStatsWithHttpInfo(accountIds, profileId, fromDate, toDate, granularity, headers);
    return localVarResponse.getData();
  }

  /**
   * Get follower stats and growth metrics
   * Returns follower count history and growth metrics for connected social accounts. **Requires analytics add-on subscription.**  **Data Freshness:** Follower counts are automatically refreshed once per day. 
   * @param accountIds Comma-separated list of account IDs (optional, defaults to all user&#39;s accounts) (optional)
   * @param profileId Filter by profile ID (optional)
   * @param fromDate Start date in YYYY-MM-DD format (defaults to 30 days ago) (optional)
   * @param toDate End date in YYYY-MM-DD format (defaults to today) (optional)
   * @param granularity Data aggregation level (optional, default to daily)
   * @return ApiResponse&lt;GetFollowerStats200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<GetFollowerStats200Response> getFollowerStatsWithHttpInfo(@javax.annotation.Nullable String accountIds, @javax.annotation.Nullable String profileId, @javax.annotation.Nullable LocalDate fromDate, @javax.annotation.Nullable LocalDate toDate, @javax.annotation.Nullable String granularity) throws ApiException {
    return getFollowerStatsWithHttpInfo(accountIds, profileId, fromDate, toDate, granularity, null);
  }

  /**
   * Get follower stats and growth metrics
   * Returns follower count history and growth metrics for connected social accounts. **Requires analytics add-on subscription.**  **Data Freshness:** Follower counts are automatically refreshed once per day. 
   * @param accountIds Comma-separated list of account IDs (optional, defaults to all user&#39;s accounts) (optional)
   * @param profileId Filter by profile ID (optional)
   * @param fromDate Start date in YYYY-MM-DD format (defaults to 30 days ago) (optional)
   * @param toDate End date in YYYY-MM-DD format (defaults to today) (optional)
   * @param granularity Data aggregation level (optional, default to daily)
   * @param headers Optional headers to include in the request
   * @return ApiResponse&lt;GetFollowerStats200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<GetFollowerStats200Response> getFollowerStatsWithHttpInfo(@javax.annotation.Nullable String accountIds, @javax.annotation.Nullable String profileId, @javax.annotation.Nullable LocalDate fromDate, @javax.annotation.Nullable LocalDate toDate, @javax.annotation.Nullable String granularity, Map<String, String> headers) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = getFollowerStatsRequestBuilder(accountIds, profileId, fromDate, toDate, granularity, headers);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      InputStream localVarResponseBody = null;
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("getFollowerStats", localVarResponse);
        }
        localVarResponseBody = ApiClient.getResponseBody(localVarResponse);
        if (localVarResponseBody == null) {
          return new ApiResponse<GetFollowerStats200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        
        
        String responseBody = new String(localVarResponseBody.readAllBytes());
        GetFollowerStats200Response responseValue = responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<GetFollowerStats200Response>() {});
        

        return new ApiResponse<GetFollowerStats200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseValue
        );
      } finally {
        if (localVarResponseBody != null) {
          localVarResponseBody.close();
        }
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder getFollowerStatsRequestBuilder(@javax.annotation.Nullable String accountIds, @javax.annotation.Nullable String profileId, @javax.annotation.Nullable LocalDate fromDate, @javax.annotation.Nullable LocalDate toDate, @javax.annotation.Nullable String granularity, Map<String, String> headers) throws ApiException {

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v1/accounts/follower-stats";

    List<Pair> localVarQueryParams = new ArrayList<>();
    StringJoiner localVarQueryStringJoiner = new StringJoiner("&");
    String localVarQueryParameterBaseName;
    localVarQueryParameterBaseName = "accountIds";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("accountIds", accountIds));
    localVarQueryParameterBaseName = "profileId";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("profileId", profileId));
    localVarQueryParameterBaseName = "fromDate";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("fromDate", fromDate));
    localVarQueryParameterBaseName = "toDate";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("toDate", toDate));
    localVarQueryParameterBaseName = "granularity";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("granularity", granularity));

    if (!localVarQueryParams.isEmpty() || localVarQueryStringJoiner.length() != 0) {
      StringJoiner queryJoiner = new StringJoiner("&");
      localVarQueryParams.forEach(p -> queryJoiner.add(p.getName() + '=' + p.getValue()));
      if (localVarQueryStringJoiner.length() != 0) {
        queryJoiner.add(localVarQueryStringJoiner.toString());
      }
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath + '?' + queryJoiner.toString()));
    } else {
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));
    }

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    // Add custom headers if provided
    localVarRequestBuilder = HttpRequestBuilderExtensions.withAdditionalHeaders(localVarRequestBuilder, headers);
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * List connected social accounts
   * Returns list of connected social accounts. By default, only returns accounts from profiles within the user&#39;s plan limit. Follower count data (followersCount, followersLastUpdated) is only included if user has analytics add-on. 
   * @param profileId Filter accounts by profile ID (optional)
   * @param includeOverLimit When true, includes accounts from profiles that exceed the user&#39;s plan limit. Useful for disconnecting accounts from over-limit profiles so they can be deleted.  (optional, default to false)
   * @return ListAccounts200Response
   * @throws ApiException if fails to make API call
   */
  public ListAccounts200Response listAccounts(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable Boolean includeOverLimit) throws ApiException {
    return listAccounts(profileId, includeOverLimit, null);
  }

  /**
   * List connected social accounts
   * Returns list of connected social accounts. By default, only returns accounts from profiles within the user&#39;s plan limit. Follower count data (followersCount, followersLastUpdated) is only included if user has analytics add-on. 
   * @param profileId Filter accounts by profile ID (optional)
   * @param includeOverLimit When true, includes accounts from profiles that exceed the user&#39;s plan limit. Useful for disconnecting accounts from over-limit profiles so they can be deleted.  (optional, default to false)
   * @param headers Optional headers to include in the request
   * @return ListAccounts200Response
   * @throws ApiException if fails to make API call
   */
  public ListAccounts200Response listAccounts(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable Boolean includeOverLimit, Map<String, String> headers) throws ApiException {
    ApiResponse<ListAccounts200Response> localVarResponse = listAccountsWithHttpInfo(profileId, includeOverLimit, headers);
    return localVarResponse.getData();
  }

  /**
   * List connected social accounts
   * Returns list of connected social accounts. By default, only returns accounts from profiles within the user&#39;s plan limit. Follower count data (followersCount, followersLastUpdated) is only included if user has analytics add-on. 
   * @param profileId Filter accounts by profile ID (optional)
   * @param includeOverLimit When true, includes accounts from profiles that exceed the user&#39;s plan limit. Useful for disconnecting accounts from over-limit profiles so they can be deleted.  (optional, default to false)
   * @return ApiResponse&lt;ListAccounts200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<ListAccounts200Response> listAccountsWithHttpInfo(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable Boolean includeOverLimit) throws ApiException {
    return listAccountsWithHttpInfo(profileId, includeOverLimit, null);
  }

  /**
   * List connected social accounts
   * Returns list of connected social accounts. By default, only returns accounts from profiles within the user&#39;s plan limit. Follower count data (followersCount, followersLastUpdated) is only included if user has analytics add-on. 
   * @param profileId Filter accounts by profile ID (optional)
   * @param includeOverLimit When true, includes accounts from profiles that exceed the user&#39;s plan limit. Useful for disconnecting accounts from over-limit profiles so they can be deleted.  (optional, default to false)
   * @param headers Optional headers to include in the request
   * @return ApiResponse&lt;ListAccounts200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<ListAccounts200Response> listAccountsWithHttpInfo(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable Boolean includeOverLimit, Map<String, String> headers) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = listAccountsRequestBuilder(profileId, includeOverLimit, headers);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      InputStream localVarResponseBody = null;
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("listAccounts", localVarResponse);
        }
        localVarResponseBody = ApiClient.getResponseBody(localVarResponse);
        if (localVarResponseBody == null) {
          return new ApiResponse<ListAccounts200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        
        
        String responseBody = new String(localVarResponseBody.readAllBytes());
        ListAccounts200Response responseValue = responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<ListAccounts200Response>() {});
        

        return new ApiResponse<ListAccounts200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseValue
        );
      } finally {
        if (localVarResponseBody != null) {
          localVarResponseBody.close();
        }
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder listAccountsRequestBuilder(@javax.annotation.Nullable String profileId, @javax.annotation.Nullable Boolean includeOverLimit, Map<String, String> headers) throws ApiException {

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v1/accounts";

    List<Pair> localVarQueryParams = new ArrayList<>();
    StringJoiner localVarQueryStringJoiner = new StringJoiner("&");
    String localVarQueryParameterBaseName;
    localVarQueryParameterBaseName = "profileId";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("profileId", profileId));
    localVarQueryParameterBaseName = "includeOverLimit";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("includeOverLimit", includeOverLimit));

    if (!localVarQueryParams.isEmpty() || localVarQueryStringJoiner.length() != 0) {
      StringJoiner queryJoiner = new StringJoiner("&");
      localVarQueryParams.forEach(p -> queryJoiner.add(p.getName() + '=' + p.getValue()));
      if (localVarQueryStringJoiner.length() != 0) {
        queryJoiner.add(localVarQueryStringJoiner.toString());
      }
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath + '?' + queryJoiner.toString()));
    } else {
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));
    }

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    // Add custom headers if provided
    localVarRequestBuilder = HttpRequestBuilderExtensions.withAdditionalHeaders(localVarRequestBuilder, headers);
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Update a social account
   * 
   * @param accountId  (required)
   * @param updateAccountRequest  (required)
   * @return UpdateAccount200Response
   * @throws ApiException if fails to make API call
   */
  public UpdateAccount200Response updateAccount(@javax.annotation.Nonnull String accountId, @javax.annotation.Nonnull UpdateAccountRequest updateAccountRequest) throws ApiException {
    return updateAccount(accountId, updateAccountRequest, null);
  }

  /**
   * Update a social account
   * 
   * @param accountId  (required)
   * @param updateAccountRequest  (required)
   * @param headers Optional headers to include in the request
   * @return UpdateAccount200Response
   * @throws ApiException if fails to make API call
   */
  public UpdateAccount200Response updateAccount(@javax.annotation.Nonnull String accountId, @javax.annotation.Nonnull UpdateAccountRequest updateAccountRequest, Map<String, String> headers) throws ApiException {
    ApiResponse<UpdateAccount200Response> localVarResponse = updateAccountWithHttpInfo(accountId, updateAccountRequest, headers);
    return localVarResponse.getData();
  }

  /**
   * Update a social account
   * 
   * @param accountId  (required)
   * @param updateAccountRequest  (required)
   * @return ApiResponse&lt;UpdateAccount200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<UpdateAccount200Response> updateAccountWithHttpInfo(@javax.annotation.Nonnull String accountId, @javax.annotation.Nonnull UpdateAccountRequest updateAccountRequest) throws ApiException {
    return updateAccountWithHttpInfo(accountId, updateAccountRequest, null);
  }

  /**
   * Update a social account
   * 
   * @param accountId  (required)
   * @param updateAccountRequest  (required)
   * @param headers Optional headers to include in the request
   * @return ApiResponse&lt;UpdateAccount200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<UpdateAccount200Response> updateAccountWithHttpInfo(@javax.annotation.Nonnull String accountId, @javax.annotation.Nonnull UpdateAccountRequest updateAccountRequest, Map<String, String> headers) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = updateAccountRequestBuilder(accountId, updateAccountRequest, headers);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      InputStream localVarResponseBody = null;
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("updateAccount", localVarResponse);
        }
        localVarResponseBody = ApiClient.getResponseBody(localVarResponse);
        if (localVarResponseBody == null) {
          return new ApiResponse<UpdateAccount200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        
        
        String responseBody = new String(localVarResponseBody.readAllBytes());
        UpdateAccount200Response responseValue = responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<UpdateAccount200Response>() {});
        

        return new ApiResponse<UpdateAccount200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseValue
        );
      } finally {
        if (localVarResponseBody != null) {
          localVarResponseBody.close();
        }
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder updateAccountRequestBuilder(@javax.annotation.Nonnull String accountId, @javax.annotation.Nonnull UpdateAccountRequest updateAccountRequest, Map<String, String> headers) throws ApiException {
    // verify the required parameter 'accountId' is set
    if (accountId == null) {
      throw new ApiException(400, "Missing the required parameter 'accountId' when calling updateAccount");
    }
    // verify the required parameter 'updateAccountRequest' is set
    if (updateAccountRequest == null) {
      throw new ApiException(400, "Missing the required parameter 'updateAccountRequest' when calling updateAccount");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v1/accounts/{accountId}"
        .replace("{accountId}", ApiClient.urlEncode(accountId.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(updateAccountRequest);
      localVarRequestBuilder.method("PUT", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    // Add custom headers if provided
    localVarRequestBuilder = HttpRequestBuilderExtensions.withAdditionalHeaders(localVarRequestBuilder, headers);
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

}
